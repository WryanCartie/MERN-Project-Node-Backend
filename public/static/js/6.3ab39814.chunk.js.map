{"version":3,"sources":["shared/components/UIElements/Map.js","places/components/PlaceItem.js","places/components/PlaceList.js","places/pages/UserPlaces.js"],"names":["Map","props","mapRef","useRef","center","zoom","useEffect","window","ol","target","current","id","layers","layer","Tile","source","OSM","view","View","proj","fromLonLat","lng","lat","ref","className","style","PlaceItem","auth","useContext","AuthContext","useState","showMap","setShowMap","showConfirmModal","setShowConfirmModal","useHttpClient","sendRequest","isLoading","error","clearError","closeMapHandler","evt","preventDefault","confirmDeleteHandler","a","process","Authorization","token","onDelete","cancelDeleteHandler","Fragment","ErrorModal","onClear","Modal","show","onCancel","header","address","contentClass","footerClass","footer","Button","onClick","coordinates","inverse","danger","LoadingSpinner","asOverlay","Card","src","image","alt","title","description","userId","creatorId","to","dange","PlaceList","items","length","map","place","key","creator","location","onDeletePlace","UserPlaces","useParams","loadedPlaces","setLoadedPlace","responseData","places","console","log","fetchPlaces","deletedPlaceId","prevPlaces","filter"],"mappings":"uRAiCeA,G,MA7BH,SAACC,GACX,IAAMC,EAASC,mBAEPC,EAAiBH,EAAjBG,OAAQC,EAASJ,EAATI,KAgBhB,OAdAC,qBAAU,WACR,IAAIC,OAAOC,GAAGR,IAAI,CAChBS,OAAQP,EAAOQ,QAAQC,GACvBC,OAAQ,CACN,IAAIL,OAAOC,GAAGK,MAAMC,KAAK,CACvBC,OAAQ,IAAIR,OAAOC,GAAGO,OAAOC,OAGjCC,KAAM,IAAIV,OAAOC,GAAGU,KAAK,CACvBd,OAAQG,OAAOC,GAAGW,KAAKC,WAAW,CAAChB,EAAOiB,IAAKjB,EAAOkB,MACtDjB,KAAMA,QAGT,CAACD,EAAQC,IAEV,yBACEkB,IAAKrB,EACLsB,UAAS,cAASvB,EAAMuB,WACxBC,MAAOxB,EAAMwB,MACbd,GAAG,U,QC6FMe,EA5GG,SAACzB,GACjB,IAAM0B,EAAOC,qBAAWC,KACxB,EAA8BC,oBAAS,GAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAAgDF,oBAAS,GAAzD,mBAAOG,EAAP,KAAyBC,EAAzB,KACA,EAAgDC,cAA1CC,EAAN,EAAMA,YAAYC,EAAlB,EAAkBA,UAAUC,EAA5B,EAA4BA,MAAMC,EAAlC,EAAkCA,WAO5BC,EAAkB,SAACC,GACvBA,EAAIC,iBACJV,GAAW,IAOPW,EAAoB,uCAAG,WAAOF,GAAP,SAAAG,EAAA,6DAC3BH,EAAIC,iBACJR,GAAoB,GAFO,kBAMnBE,EAAY,GAAD,OAAIS,yDAAJ,mBAAgD5C,EAAMU,IACvE,SAAS,KACT,CAACmC,cAAe,UAAWnB,EAAKoB,QARP,OAUzB9C,EAAM+C,SAAS/C,EAAMU,IAVI,yGAAH,sDAgBpBsC,EAAsB,SAACR,GAC3BA,EAAIC,iBACJR,GAAoB,IAGtB,OACE,kBAAC,IAAMgB,SAAP,KACE,kBAACC,EAAA,EAAD,CAAYb,MAAOA,EAAOc,QAASb,IACnC,kBAACc,EAAA,EAAD,CACEC,KAAMvB,EACNwB,SAAUf,EACVgB,OAAQvD,EAAMwD,QACdC,aAAa,4BACbC,YAAY,4BACZC,OAAQ,kBAACC,EAAA,EAAD,CAAQC,QAAStB,GAAjB,UAER,yBAAKhB,UAAU,iBACb,kBAAC,EAAD,CAAKpB,OAAQH,EAAM8D,YAAa1D,KAAM,OAG1C,kBAACgD,EAAA,EAAD,CACEC,KAAMrB,EACNsB,SAAUN,EACVO,OAAO,iBACPG,YAAY,4BACZC,OACE,kBAAC,IAAMV,SAAP,KACE,kBAACW,EAAA,EAAD,CAAQG,SAAO,EAACF,QAASb,GAAzB,UAGA,kBAACY,EAAA,EAAD,CAAQI,QAAM,EAACH,QAASnB,GAAxB,aAMJ,2BACG,IADH,8FAGuB,MAGzB,wBAAInB,UAAU,cACXa,GAAa,kBAAC6B,EAAA,EAAD,CAAgBC,WAAS,IACvC,kBAACC,EAAA,EAAD,CAAM5C,UAAU,uBACd,yBAAKA,UAAU,qBACb,yBAAK6C,IAAG,UAAKxB,sDAAL,YAAwC5C,EAAMqE,OAASC,IAAKtE,EAAMuE,SAE5E,yBAAKhD,UAAU,oBACb,4BAAKvB,EAAMuE,OACX,4BAAKvE,EAAMwD,SACX,2BAAIxD,EAAMwE,cAEZ,yBAAKjD,UAAU,uBACb,kBAACqC,EAAA,EAAD,CAAQC,QApFK,SAACrB,GACtBA,EAAIC,iBACJV,GAAW,IAkF8BgC,SAAO,GAAxC,cACc,KAEbrC,EAAK+C,SAAWzE,EAAM0E,WACrB,kBAACd,EAAA,EAAD,CAAQe,GAAE,kBAAa3E,EAAMU,KAA7B,QAEDgB,EAAK+C,SAAWzE,EAAM0E,WACrB,kBAACd,EAAA,EAAD,CAAQgB,OAAK,EAACf,QAjFO,WAC/B5B,GAAoB,KAgFV,eCvEC4C,G,MA9BG,SAAC7E,GACjB,OAA2B,IAAvBA,EAAM8E,MAAMC,OAEZ,yBAAKxD,UAAU,qBACb,kBAAC4C,EAAA,EAAD,KACE,2EACA,kBAACP,EAAA,EAAD,CAAQe,GAAG,eAAX,iBAMN,wBAAIpD,UAAU,cACXvB,EAAM8E,MAAME,KAAI,SAACC,GAAD,OACf,kBAAC,EAAD,CACEC,IAAKD,EAAMvE,GACXA,GAAIuE,EAAMvE,GACV2D,MAAOY,EAAMZ,MACbE,MAAOU,EAAMV,MACbC,YAAaS,EAAMT,YACnBhB,QAASyB,EAAMzB,QACfkB,UAAWO,EAAME,QACjBrB,YAAamB,EAAMG,SACnBrC,SAAU/C,EAAMqF,sB,OCeXC,UApCI,WACjB,IAAMb,EAASc,cAAYd,OAE3B,EAAiDvC,cAA1CC,EAAP,EAAOA,YAAYC,EAAnB,EAAmBA,UAAUC,EAA7B,EAA6BA,MAAMC,EAAnC,EAAmCA,WACnC,EAAqCT,mBAAS,IAA9C,mBAAM2D,EAAN,KAAmBC,EAAnB,KACApF,qBAAU,YACS,uCAAG,4BAAAsC,EAAA,+EAEWR,EAAY,GAAD,OACjCS,yDADiC,wBACgB6B,IAHtC,OAEViB,EAFU,OAKhBD,EAAeC,EAAaC,QALZ,gDAOhBC,QAAQC,IAAR,MAPgB,yDAAH,qDAWjBC,KACC,CAAC3D,EAAasC,IAKjB,OACE,kBAAC,IAAMxB,SAAP,KACE,kBAACC,EAAA,EAAD,CAAYb,MAAOA,EAAOc,QAASb,IAClCF,GACC,yBAAKb,UAAU,UACb,kBAAC0C,EAAA,EAAD,QAGF7B,GAAaoD,GAAgB,kBAAC,EAAD,CAAWH,cAXpB,SAACU,GACzBN,GAAe,SAAAO,GAAU,OAAIA,EAAWC,QAAO,SAAAhB,GAAK,OAAGA,EAAMvE,KAAOqF,SAUWjB,MAAOU","file":"static/js/6.3ab39814.chunk.js","sourcesContent":["import React, { useRef, useEffect } from \"react\";\r\n\r\nimport \"./Map.css\";\r\n\r\nconst Map = (props) => {\r\n  const mapRef = useRef();\r\n\r\n  const { center, zoom } = props;\r\n\r\n  useEffect(() => {\r\n    new window.ol.Map({\r\n      target: mapRef.current.id,\r\n      layers: [\r\n        new window.ol.layer.Tile({\r\n          source: new window.ol.source.OSM(),\r\n        }),\r\n      ],\r\n      view: new window.ol.View({\r\n        center: window.ol.proj.fromLonLat([center.lng, center.lat]),\r\n        zoom: zoom,\r\n      }),\r\n    });\r\n  }, [center, zoom]);\r\n  return (\r\n    <div\r\n      ref={mapRef}\r\n      className={`map ${props.className}`}\r\n      style={props.style}\r\n      id=\"map\"\r\n    ></div>\r\n  );\r\n};\r\n\r\nexport default Map;\r\n","import React, {useState, useContext } from \"react\";\r\nimport Button from \"../../shared/components/FormElements/Button\";\r\nimport { AuthContext } from \"../../shared/context/auth-context\";\r\nimport \"./PlaceItem.css\";\r\nimport Card from \"../../shared/components/UIElements/Card\";\r\nimport Modal from \"../../shared/components/UIElements/Modal\";\r\nimport LoadingSpinner from \"../../shared/components/UIElements/LoadingSpinner\";\r\nimport ErrorModal from \"../../shared/components/UIElements/ErrorModal\";\r\nimport Map from \"../../shared/components/UIElements/Map\";\r\nimport { useHttpClient } from \"../../shared/hooks/http-hooks\";\r\n\r\n\r\n\r\nconst PlaceItem = (props) => {\r\n  const auth = useContext(AuthContext);\r\n  const [showMap, setShowMap] = useState(false);\r\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\r\n  const{sendRequest,isLoading,error,clearError} = useHttpClient();\r\n\r\n  const openMapHandler = (evt) =>{\r\n    evt.preventDefault()\r\n    setShowMap(true);\r\n  } \r\n\r\n  const closeMapHandler = (evt) => {\r\n    evt.preventDefault()\r\n    setShowMap(false);\r\n  }\r\n\r\n  const showDeleteWarningHandler = () => {\r\n    setShowConfirmModal(true);\r\n  };\r\n\r\n  const confirmDeleteHandler = async (evt) => {\r\n    evt.preventDefault();\r\n    setShowConfirmModal(false);\r\n  \r\n\r\n    try{\r\n      await sendRequest(`${process.env.REACT_APP_BACKEND_URL}/places/${props.id}`,\r\n      'DELETE',null,\r\n      {Authorization: 'Bearer '+ auth.token}\r\n      )\r\n      props.onDelete(props.id)\r\n    }catch(err){\r\n\r\n    }\r\n  };\r\n\r\n  const cancelDeleteHandler = (evt) => {\r\n    evt.preventDefault();\r\n    setShowConfirmModal(false);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ErrorModal error={error} onClear={clearError}/>\r\n      <Modal\r\n        show={showMap}\r\n        onCancel={closeMapHandler}\r\n        header={props.address}\r\n        contentClass=\"place-item__modal-content\"\r\n        footerClass=\"place-item__modal-actions\"\r\n        footer={<Button onClick={closeMapHandler}>CLOSE</Button>}\r\n      >\r\n        <div className=\"map-container\">\r\n          <Map center={props.coordinates} zoom={16} />\r\n        </div>\r\n      </Modal>\r\n      <Modal\r\n        show={showConfirmModal}\r\n        onCancel={cancelDeleteHandler}\r\n        header=\"Are you sure ?\"\r\n        footerClass=\"place-item__modal-actions\"\r\n        footer={\r\n          <React.Fragment>\r\n            <Button inverse onClick={cancelDeleteHandler}>\r\n              CANCEL\r\n            </Button>\r\n            <Button danger onClick={confirmDeleteHandler}>\r\n              CONFIRM\r\n            </Button>\r\n          </React.Fragment>\r\n        }\r\n      >\r\n        <p>\r\n          {\" \"}\r\n          Are you sure you want to proceed with this action ? This action cannot\r\n          be undone thereafter{\" \"}\r\n        </p>\r\n      </Modal>\r\n      <li className=\"place-item\">\r\n        {isLoading && <LoadingSpinner asOverlay/>ã€€}\r\n        <Card className=\"place-item__content\">\r\n          <div className=\"place-item__image\">\r\n            <img src={`${process.env.REACT_APP_ASSET_URL}/${props.image}`} alt={props.title} />\r\n          </div>\r\n          <div className=\"place-item__info\">\r\n            <h2>{props.title}</h2>\r\n            <h3>{props.address}</h3>\r\n            <p>{props.description}</p>\r\n          </div>\r\n          <div className=\"place-item__actions\">\r\n            <Button onClick={openMapHandler} inverse>\r\n              VIEW ON MAP{\" \"}\r\n            </Button>\r\n            {auth.userId === props.creatorId && (\r\n              <Button to={`/places/${props.id}`}>EDIT</Button>\r\n            )}\r\n            {auth.userId === props.creatorId && (\r\n              <Button dange onClick={showDeleteWarningHandler}>\r\n                DELETE\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </Card>\r\n      </li>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default PlaceItem;\r\n","import React from \"react\";\r\n\r\nimport Card from \"../../shared/components/UIElements/Card\";\r\nimport Button from \"../../shared/components/FormElements/Button\";\r\n\r\nimport PlaceItem from \"./PlaceItem\";\r\n\r\nimport './PlaceList.css'\r\n\r\nconst PlaceList = (props) => {\r\n  if (props.items.length === 0) {\r\n    return (\r\n      <div className=\"place-list center\">\r\n        <Card>\r\n          <h2>No places found. Maybe create a new place ?</h2>\r\n          <Button to=\"/places/new\">Share Place</Button>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <ul className=\"place-list\">\r\n      {props.items.map((place) => (\r\n        <PlaceItem\r\n          key={place.id}\r\n          id={place.id}\r\n          image={place.image}\r\n          title={place.title}\r\n          description={place.description}\r\n          address={place.address}\r\n          creatorId={place.creator}\r\n          coordinates={place.location}\r\n          onDelete={props.onDeletePlace}\r\n        />\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default PlaceList;\r\n","import React,{useEffect,useState} from \"react\";\r\n\r\nimport PlaceList from \"../components/PlaceList\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useHttpClient } from \"../../shared/hooks/http-hooks\";\r\nimport ErrorModal from \"../../shared/components/UIElements/ErrorModal\";\r\nimport LoadingSpinner from \"../../shared/components/UIElements/LoadingSpinner\";\r\n\r\n\r\n\r\n\r\nconst UserPlaces = () => {\r\n  const userId = useParams().userId;\r\n  \r\n  const {sendRequest,isLoading,error,clearError} = useHttpClient()\r\n  const[loadedPlaces,setLoadedPlace] = useState([]);\r\n  useEffect(() => {\r\n    const fetchPlaces = async () => {\r\n      try {\r\n        const responseData = await sendRequest(\r\n          `${process.env.REACT_APP_BACKEND_URL}/places/user/${userId}`\r\n        );\r\n        setLoadedPlace(responseData.places);\r\n      } catch (err) {\r\n        console.log(err)\r\n      }\r\n    };\r\n  \r\n    fetchPlaces();\r\n  }, [sendRequest, userId]);\r\n\r\n const placeDeleteHandler = (deletedPlaceId) => {\r\n    setLoadedPlace(prevPlaces => prevPlaces.filter(place=> place.id !== deletedPlaceId))\r\n  }\r\n  return (\r\n    <React.Fragment>\r\n      <ErrorModal error={error} onClear={clearError} />\r\n      {isLoading && (\r\n        <div className=\"center\">\r\n          <LoadingSpinner />\r\n        </div>\r\n      )}\r\n      {!isLoading && loadedPlaces && <PlaceList onDeletePlace={placeDeleteHandler} items={loadedPlaces} />}\r\n    </React.Fragment>\r\n  )\r\n};\r\n\r\nexport default UserPlaces;\r\n"],"sourceRoot":""}